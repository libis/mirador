<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" type="text/css" href="build/mirador/css/mirador-combined.css">
	<link rel="stylesheet" type="text/css" href="build/mirador/css/downloadmenu.css" />
    <title>Mirador Viewer</title>
    <style type="text/css">
     #viewer {
       width: 100%;
       height: 100%;
       position: fixed;
     }
    </style>
  </head>
  <body>
    <div id="viewer"></div>

    <script src="build/mirador/mirador.js"></script>
    <script src="build/mirador/downloadMenu.js"></script>
    <script type="text/javascript">
//http://localhost/mirador-2.7.0/index.html?dps_pid=IE10953363&entiteit=UAR_Charters_OUL&fl_pid=FL10953762     
//http://services.libis.be/m2/index.html?dps_pid=IE9287606&entiteit=Alamire_Foundation&fl_pid=FL9287873
  
     function copyURL(copyText){
        /* Select the text field */
        var $temp = $("<input>").val(copyText);
        $("body").append($temp);
        $temp.select();
        document.execCommand("copy");
        $temp.remove();
    }

		    function getQueryVariable(variable)
		    {
	        	var query = window.location.search.substring(1);
                        var result = 'false';
	        	var vars = query.split("&");
		        for (var i=0;i<vars.length;i++) {
        		    var pair = vars[i].split("=");

		            if(pair[0] == variable){
				result = pair[1];
				}
        		}
	        	return(result);
		    }

		    var loadedIePid = getQueryVariable("dps_pid");
		    var entiteit = getQueryVariable("entiteit");
                    var loadedFlPid = getQueryVariable("fl_pid");
                    var canvasid;
                    if (loadedFlPid == 'false') {
                        $(function() {
                          // Called without "let" or "var"
                          // so we can play with it in the browser

                                       myMiradorInstance = Mirador({
                                           "id": "viewer",
                                           "currentWorkspaceType": "singleObject",
                                           "mainMenuSettings": {
                                             "show": true,
                                             "buttons": {
                                                   "bookmark": true,
                                                   "layout": true,
                                                   "fullScreenViewer": true
                                             },
                                             "userButtons": [
                                                   {"label": "Help",
                                                    "iconClass": "fa fa-question-circle",
                                                    "attributes": { "class": "help", "href": "Tutorial_Mirador.pdf", "target": "_blank"}}
                                             ],
                                             "userLogo": {
                                                   "label": "Teneo",
                                                   "attributes": {
                                                           "href": "http://www.lias.be/lias/teneo-opslag-preservatie",
                                                           "target": "_blank",
                                                           "class": "logo visuallyhidden focusable",
                                                   }
                                             }

                                           },
                                           "data":[{ "manifestUri": "http://services.libis.be/m2/manifest/"+loadedIePid, "location": "LIBIS"}],
                                           "windowObjects": [{"loadedManifest": "http://services.libis.be/m2/manifest/"+loadedIePid,
                                                   "viewType" : "ImageView","annotationLayer":false,"sidePanelVisible":false,"id":"8fea4c79-5dda-4893-9dbe-3997555020c7"}],
                                           "jsonStorageEndpoint": { "name": "Libis JSON endpoint", "module": "LibisBlobAPI" },
                                           "saveSession": true
                                      });                    

                        });                    }
                    else {
                        canvasid = "http://services.libis.be/m2/canvas/canvas-"+loadedIePid+"_"+loadedFlPid+".json";
                        $(function() {
                          // Called without "let" or "var"
                          // so we can play with it in the browser

                                       myMiradorInstance = Mirador({
                                           "id": "viewer",
                                           "currentWorkspaceType": "singleObject",
                                           "mainMenuSettings": {
                                             "show": true,
                                             "buttons": {
                                                   "bookmark": true,
                                                   "layout": true,
                                                   "fullScreenViewer": true
                                             },
                                             "userButtons": [
                                                   {"label": "Help",
                                                    "iconClass": "fa fa-question-circle",
                                                    "attributes": { "class": "help", "href": "Tutorial_Mirador.pdf", "target": "_blank"}}
                                             ],
                                             "userLogo": {
                                                   "label": "Teneo",
                                                   "attributes": {
                                                           "href": "http://www.lias.be/lias/teneo-opslag-preservatie",
                                                           "target": "_blank",
                                                           "class": "logo visuallyhidden focusable",
                                                   }
                                             },
                                             "clientLogo": {
                                                   "label": "Teneo",
                                                   "attributes": {
                                                           "href": "http://www.lias.be/lias/teneo-opslag-preservatie",
                                                           "target": "_blank",
                                                           "class": "logo visuallyhidden focusable",
                                                   }
                                             }

                                           },
                                           "data":[{ "manifestUri": "http://services.libis.be/m2/manifest/"+loadedIePid, "location": "LIBIS"}],
                                           "windowObjects": [{"loadedManifest": "http://services.libis.be/m2/manifest/"+loadedIePid,
                                                   "canvasID" : canvasid,
                                                   "viewType" : "ImageView","annotationLayer":false,"sidePanelVisible":false,"id":"8fea4c79-5dda-4893-9dbe-3997555020c7"}],
                                           "jsonStorageEndpoint": { "name": "Libis JSON endpoint", "module": "LibisBlobAPI" },
                                           "saveSession": true
                                      });                    

                        });
                    } 
    </script>
    <!-- This enables live reloading of assets for improved developer experience. -->
    <!-- Remove if copying this page as a basis for another project. -->
    <script src="//localhost:35729/livereload.js"></script>
  </body>
</html>
